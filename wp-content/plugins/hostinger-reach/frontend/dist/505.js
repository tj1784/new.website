"use strict";(self.webpackChunkhostinger_reach=self.webpackChunkhostinger_reach||[]).push([[505],{132:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(425);const n=(0,l.KR)(0),i=(0,l.KR)(null),o={class:"base-modal"},s={class:"base-modal__header"},r={key:0,class:"base-modal__title"};var u=(0,l.pM)({__name:"BaseModal",props:{title:{},subtitle:{},titleAlignment:{default:"left"},disableScroll:{type:Boolean,default:!0}},setup(e){const a=e,{lockScroll:t,unlockScroll:u}={lockScroll:()=>{if(n.value++,1===n.value){i.value={overflow:document.body.style.overflow,paddingRight:document.body.style.paddingRight};const e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${e}px`)}},unlockScroll:()=>{n.value=Math.max(0,n.value-1),0===n.value&&i.value&&(document.body.style.overflow=i.value.overflow,document.body.style.paddingRight=i.value.paddingRight,i.value=null)},isLocked:()=>n.value>0};return(0,l.sV)(()=>{a.disableScroll&&t()}),(0,l.hi)(()=>{a.disableScroll&&u()}),(a,t)=>((0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",s,[(0,l.RG)(a.$slots,"back-button"),(0,l.Lk)("span",{class:(0,l.C4)(["base-modal__title-container",{"base-modal__title-container--centered":"centered"===e.titleAlignment}])},[(0,l.RG)(a.$slots,"title-icon"),e.title?((0,l.uX)(),(0,l.CE)("h2",r,(0,l.v_)(e.title),1)):(0,l.Q3)("v-if",!0)],2)]),e.subtitle?((0,l.uX)(),(0,l.CE)("p",{key:0,class:(0,l.C4)(["base-modal__subtitle",{"base-modal__subtitle--centered":"centered"===e.titleAlignment}])},(0,l.v_)(e.subtitle),3)):(0,l.Q3)("v-if",!0),(0,l.RG)(a.$slots,"default")]))}});var d=(0,t(262).A)(u,[["__scopeId","data-v-330ecf55"]])},505:function(e,a,t){t.r(a),t.d(a,{default:function(){return E}});var l=t(425),n=t(259),i=t(132);const o=["aria-label"],s={key:0,class:"pagination-ellipsis","aria-hidden":"true"};var r=(0,l.pM)({__name:"Pagination",props:{currentPage:{},totalItems:{},itemsPerPage:{},totalVisible:{default:5},disabled:{type:Boolean,default:!1}},emits:["page-change","update:current-page"],setup(e,{emit:a}){const t=e,i=a,r=(0,l.EW)(()=>Math.ceil(t.totalItems/t.itemsPerPage)),u=(0,l.EW)(()=>{const e=[],a=t.currentPage,l=r.value,n=t.totalVisible;if(l<=n){for(let a=1;a<=l;a++)e.push(a);return e}e.push(1);const i=Math.floor((n-3)/2),o=Math.max(2,a-i),s=Math.min(l-1,a+i);o>2&&e.push("...");for(let a=o;a<=s;a++)1!==a&&a!==l&&e.push(a);return s<l-1&&e.push("..."),l>1&&e.push(l),e}),d=(0,l.EW)(()=>t.currentPage>1&&!t.disabled),c=(0,l.EW)(()=>t.currentPage<r.value&&!t.disabled),g=e=>{t.disabled||e<1||e>r.value||e===t.currentPage||(i("page-change",e),i("update:current-page",e))},p=()=>{d.value&&g(t.currentPage-1)},v=()=>{c.value&&g(t.currentPage+1)};return(a,t)=>r.value>1?((0,l.uX)(),(0,l.CE)("nav",{key:0,class:"pagination",role:"navigation","aria-label":`Pagination, page ${e.currentPage} of ${r.value}`},[(0,l.bF)((0,l.R1)(n.BN),{variant:"text",color:"neutral",size:"small","is-disabled":!d.value,"aria-label":"Go to previous page, page "+(e.currentPage-1),tabindex:d.value?0:-1,onClick:p},{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(n.QC),{name:"ic-chevron-small-left-16"})]),_:1},8,["is-disabled","aria-label","tabindex"]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,(a,t)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:`page-${a}-${t}`},["..."===a?((0,l.uX)(),(0,l.CE)("span",s,"...")):((0,l.uX)(),(0,l.Wv)((0,l.R1)(n.BN),{key:1,variant:"text",size:"small",color:a===e.currentPage?"primary":"neutral","is-disabled":e.disabled,"aria-label":a===e.currentPage?`Current page, page ${a}`:`Go to page ${a}`,"aria-current":a===e.currentPage?"page":void 0,tabindex:e.disabled?-1:0,onClick:e=>g(a),onKeydown:e=>((e,a)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g(a))})(e,a)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(a),1)]),_:2},1032,["color","is-disabled","aria-label","aria-current","tabindex","onClick","onKeydown"]))],64))),128)),(0,l.bF)((0,l.R1)(n.BN),{variant:"text",color:"neutral",size:"small","is-disabled":!c.value,"aria-label":`Go to next page, page ${e.currentPage+1}`,tabindex:c.value?0:-1,onClick:v},{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(n.QC),{name:"ic-chevron-small-right-16"})]),_:1},8,["is-disabled","aria-label","tabindex"])],8,o)):(0,l.Q3)("v-if",!0)}}),u=t(262);var d=(0,u.A)(r,[["__scopeId","data-v-35c72b14"]]),c=t(818),g=t(408);const p={class:"select-page-modal"},v={class:"select-page-modal__content"},m={class:"select-page-modal__pages"},_={class:"select-page-modal__page-loading"},b=["onClick"],h={key:0,class:"select-page-modal__page-loading"},k={class:"select-page-modal__page-content"},P={key:2,class:"select-page-modal__no-pages"},y={class:"select-page-modal__pagination"},f={class:"select-page-modal__footer"};var R=(0,l.pM)({__name:"SelectPageModal",props:{title:{},pages:{},data:{}},setup(e){const a=e,t=(0,c.Z)(),o=(0,l.KR)(null),s=(0,l.KR)(!1),r=(0,l.EW)(()=>{const e=t.items;return e&&e.length>0?e:a.pages||[]}),u=e=>"name"in e&&e.name?e.name:"title"in e&&e.title?.rendered?e.title.rendered:(0,g.T)("hostinger_reach_forms_no_title"),R=e=>"isAdded"in e&&e.isAdded||!1,E=(0,l.EW)(()=>t.isLoading),C=(0,l.EW)(()=>t.currentPage),w=(0,l.EW)(()=>t.totalItems),W=(0,l.EW)(()=>t.itemsPerPage),L=async e=>{await t.goToPage(e)},x=()=>{s.value||(s.value=!0,window.location.href="/wp-admin/post-new.php?post_type=page&hostinger_reach_add_block=1")},F=()=>{const e=a.data?.backButtonRedirectAction;e&&e()};return(0,l.sV)(async()=>{await t.resetToFirstPage()}),(a,t)=>((0,l.uX)(),(0,l.Wv)(i.A,{"title-alignment":"centered",title:e.title},(0,l.eX)({default:(0,l.k6)(()=>[(0,l.Lk)("div",p,[(0,l.Lk)("div",v,[(0,l.Lk)("div",m,[E.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(W.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:`skeleton-${e}`,class:"select-page-modal__page-item select-page-modal__page-item--loading"},[(0,l.Lk)("div",_,[(0,l.bF)((0,l.R1)(n.Lc),{width:"60%",height:"20px","border-radius":"sm"})])]))),128)):r.value&&r.value.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(r.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,l.C4)(["select-page-modal__page-item",{"select-page-modal__page-item--selected":R(e),"select-page-modal__page-item--loading":o.value===String(e.id)}]),onClick:a=>(e=>{if(o.value)return;o.value=String(e.id);const a=e.link;a&&(window.location.href=a)})(e)},[o.value===String(e.id)?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.bF)((0,l.R1)(n.Lc),{width:"60%",height:"20px","border-radius":"sm"})])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",k,[(0,l.bF)((0,l.R1)(n.GW),{variant:"body-2-bold",as:"span",class:"select-page-modal__page-name"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(u(e)),1)]),_:2},1024)]),(0,l.Lk)("div",null,[(0,l.bF)((0,l.R1)(n.QC),{name:R(e)?"ic-checkmark-circle-filled-24":"ic-circle-empty-24",color:R(e)?"primary--500":"neutral--200"},null,8,["name","color"])])],64))],10,b))),128)):E.value?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",P,[(0,l.bF)((0,l.R1)(n.GW),{variant:"body-2",as:"p",class:"select-page-modal__no-pages-text"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)((0,l.R1)(g.T)("hostinger_reach_forms_no_pages_available")),1)]),_:1})]))])]),(0,l.Lk)("div",y,[(0,l.bF)(d,{"current-page":C.value,"total-items":w.value,"items-per-page":W.value,"total-visible":5,disabled:E.value,onPageChange:L,"onUpdate:currentPage":L},null,8,["current-page","total-items","items-per-page","disabled"])]),(0,l.Lk)("div",f,[(0,l.bF)((0,l.R1)(n.BN),{variant:"outline",color:"neutral",size:"small","icon-prepend":s.value?void 0:"ic-add-16","is-loading":s.value,onClick:x},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)((0,l.R1)(g.T)("hostinger_reach_forms_new_page_text")),1)]),_:1},8,["icon-prepend","is-loading"])])])]),_:2},[e.data?.backButtonRedirectAction?{name:"back-button",fn:(0,l.k6)(()=>[(0,l.Lk)("button",{class:"select-page-modal__back-button",type:"button",onClick:F},[(0,l.bF)((0,l.R1)(n.QC),{name:"ic-chevron-left-16",color:"neutral--600"})])]),key:"0"}:void 0]),1032,["title"]))}});var E=(0,u.A)(R,[["__scopeId","data-v-3421b05a"]])},818:function(e,a,t){t.d(a,{Z:function(){return g}});var l=t(774),n=t(425);var i=t(223),o=t(326),s=t(602),r=t(264),u=t(371);const d=`${hostinger_reach_reach_data.rest_base_url}wp/v2`,c=(e,a)=>{const{nonce:t,totalFormPages:l}=(0,o.N)(),n=e?.page||1,c=e?.perPage||5,g=l||0,p=Math.ceil(g/c),v=new URLSearchParams;v.append("hostinger_reach_page_query","1"),v.append("page",n.toString()),v.append("per_page",c.toString());const m={headers:{[s.Y9.CORRELATION_ID]:a?.[s.Y9.CORRELATION_ID]||(0,r.d)(),[s.Y9.WP_NONCE]:t}};return u.A.get(`${d}/pages?${v.toString()}`,m).then(([e,a])=>{if(a)return[null,a];const t=e?.map(e=>{let a=`/wp-admin/post.php?post=${e.id}`;return e.HostingerReachPluginHasSubscriptionBlock||(a=`${a}&hostinger_reach_add_block=1`),a=e.HostingerReachPluginIsElementor?`${a}&action=elementor`:`${a}&action=edit`,{id:e.id.toString(),name:(0,i.D4)(e.title.rendered),link:a,isAdded:e.HostingerReachPluginHasSubscriptionBlock??!1}})||[];return[{data:t,pagination:{currentPage:n,totalPages:p,totalItems:g,perPage:c}},null]})},g=(0,l.nY)("pagesStore",()=>{const e=((e,a={})=>{const{itemsPerPage:t=5,initialPage:l=1,autoLoad:i=!0}=a,o=(0,n.KR)(l),s=(0,n.KR)(0),r=(0,n.KR)(0),u=(0,n.KR)([]),d=(0,n.KR)(!1),c=(0,n.KR)(!1),g=(0,n.KR)(null),p=(0,n.EW)(()=>o.value>1),v=(0,n.EW)(()=>o.value<s.value),m=(0,n.EW)(()=>!d.value&&0===u.value.length),_=(0,n.EW)(()=>(o.value-1)*t+1),b=(0,n.EW)(()=>Math.min(o.value*t,r.value)),h=(0,n.EW)(()=>({from:_.value,to:b.value,total:r.value})),k=async(a=o.value)=>{d.value=!0,c.value=!1,g.value=null;try{const[l,n]=await e(a,t);return n?(c.value=!0,g.value=n,u.value=[],!1):!!l&&(u.value=l.data,o.value=l.pagination.currentPage,s.value=l.pagination.totalPages,r.value=l.pagination.totalItems,!0)}catch(e){return c.value=!0,g.value=e,u.value=[],!1}finally{d.value=!1}},P=async e=>{e>=1&&e<=s.value&&e!==o.value&&!d.value&&await k(e)},y=async()=>{p.value&&await P(o.value-1)},f=async()=>{v.value&&await P(o.value+1)};return i&&k(l),{currentPage:o,totalPages:s,totalItems:r,itemsPerPage:t,items:u,isLoading:d,hasError:c,error:g,hasPrevious:p,hasNext:v,isEmpty:m,startIndex:_,endIndex:b,pageRange:h,loadData:k,goToPage:P,setPage:e=>P(e),nextPage:()=>f(),prevPage:()=>y(),goToFirstPage:async()=>{await P(1)},goToLastPage:async()=>{await P(s.value)},goToPreviousPage:y,goToNextPage:f,refresh:async()=>{await k(o.value)}}})(async(e,a)=>await c({page:e,perPage:a},void 0),{itemsPerPage:10,initialPage:1,autoLoad:!1});return{pages:e.items,isPagesLoading:e.isLoading,resetToFirstPage:async()=>{await e.goToPage(1)},...e}},{persist:{key:s.PK.PAGES_STORE}})}}]);