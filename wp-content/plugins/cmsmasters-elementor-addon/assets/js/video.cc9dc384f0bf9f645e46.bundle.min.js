/*! cmsmasters-elementor-addon - v1.18.4 - 21-09-2025 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[6791],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[i]=t;Array.isArray(i)||(i=i.split(/\s/));const[,s]=t;i.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return s(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],i=elementorFrontend.getCurrentDeviceMode(),s=this.getElementSettings();let n=t.indexOf(i);for(;n>0;){const i=s[e+"_"+t[n]];if(i&&"object"==typeof i&&Object.prototype.hasOwnProperty.call(i,"size")&&i.size)return i;n--}return s[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},4168:(e,t,i)=>{var s=i(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(2533));class _default extends elementorModules.ViewModule{__construct(e){super.__construct(e),this.keydownHelper=new n.default}getDefaultElements(){const{$videoContainer:e,$remove:t,$coverImage:i}=this.getSettings();return{$videoContainer:e,$remove:t,$coverImage:i,$window:jQuery(window)}}onInit(){super.onInit(),this.initMinimize()}initMinimize(){const e=this.elements.$coverImage,t=this.elements.$videoContainer,i=this.elements.$window,s=e.length;s&&(t.addClass("image_overlay"),this.keydownHelper.bindAccessibleClick(this.elements.$coverImage,(e=>{this.elements.$videoContainer.removeClass("image_overlay").addClass("remove_image_overlay")}))),i.on("scroll",(()=>{const e=t.outerHeight()+t.offset().top;if(i.scrollTop()<=e)t.removeClass("minimize");else{if(!t.hasClass("remove_minimize")){const e=t.hasClass("remove_image_overlay")||t.hasClass("minimize_always");(!s||s&&e)&&t.addClass("minimize")}this.keydownHelper.bindAccessibleClick(this.elements.$remove,(e=>{this.elements.$videoContainer.removeClass("minimize").addClass("remove_minimize")}))}}))}}t.default=_default},6888:(e,t,i)=>{var s=i(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(2277)),o=s(i(2533)),a=s(i(4168));class Video extends n.default{__construct(e){super.__construct(e),this.keydownHelper=new o.default}getDefaultElements(){return{$videoContainer:this.findElement(".elementor-widget-cmsmasters-video__container"),$coverImage:this.findElement(".elementor-widget-cmsmasters-video__cover-image"),$videoHosted:this.findElement(".elementor-widget-cmsmasters-video__hosted"),$videoIframe:this.findElement(".elementor-video-iframe"),$remove:this.findElement(".elementor-widget-cmsmasters-video__close-button")}}bindEvents(){const e=this.getElementSettings();this.isVideoStarted=!1,this.keydownHelper.bindAccessibleClick(this.elements.$coverImage,(e=>this.handleVideo(e)),{events:"click keydown"}),"hover"===e.autoplay_type&&(this.elements.$videoContainer.attr("tabindex",0),this.elements.$videoContainer.on("mouseenter focus",this.handleHover.bind(this)),this.elements.$videoContainer.on("mouseleave blur",this.pauseVideo.bind(this))),"scroll"===e.autoplay_type&&this.scrollAutoplay(),this.getElementSettings("lightbox")||document.addEventListener("click",this.stopVideo.bind(this))}onInit(){super.onInit(),this.initMinimize(),"scroll"===this.getElementSettings("autoplay_type")&&this.scrollAutoplay()}handleHover(){this.isVideoStarted?this.resumeVideo():(this.handleVideo(),this.isVideoStarted=!0)}scrollAutoplay(){new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>=.3?this.handleHover():this.pauseVideo()}))}),{threshold:[.3]}).observe(this.elements.$videoContainer[0])}pauseVideo(){let e="";if(e="hosted"===this.getElementSettings("video_type")?this.elements.$videoHosted[0]:this.elements.$videoIframe[0],e&&e.src){switch(this.getElementSettings("video_type")){case"youtube":e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break;case"vimeo":e.contentWindow.postMessage('{"method":"pause"}',"*");break;case"hosted":e.pause()}this.elements.$coverImage.fadeIn(300)}}resumeVideo(){let e="";if(e="hosted"===this.getElementSettings("video_type")?this.elements.$videoHosted[0]:this.elements.$videoIframe[0],e&&e.src){switch(this.getElementSettings("video_type")){case"youtube":e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break;case"vimeo":e.contentWindow.postMessage('{"method":"play"}',"*");break;case"hosted":e.play()}this.elements.$coverImage.fadeOut(300)}}stopVideo(e){const t="cmsmasters_popup"===e.target.getAttribute("data-elementor-type");if(!(null!==e.target.closest('[class*="close"]'))&&!t)return;let i="";if("hosted"===this.getElementSettings("video_type")){if(i=this.elements.$videoHosted[0],!i.src)return;i.setAttribute("src",i.src)}else if(i=this.elements.$videoIframe[0],"dailymotion"===this.getElementSettings("video_type"))i&&i.contentWindow&&(i.contentWindow.postMessage('{"command":"play", "params":{"start":0, "autoplay":false}}',"*"),i.contentWindow.postMessage('{"method":"pause"}',"*"));else if("vimeo"===this.getElementSettings("video_type"))i&&i.contentWindow&&(i.contentWindow.postMessage('{"method":"setCurrentTime","value":0}',"*"),i.contentWindow.postMessage('{"method":"pause"}',"*"));else{if(!i.src)return;i.setAttribute("src",i.src)}}initMinimize(){"yes"===this.getElementSettings("video_minimize")&&new a.default({widget:this,$videoContainer:this.elements.$videoContainer,$remove:this.elements.$remove,$coverImage:this.elements.$coverImage})}handleVideo(){this.getElementSettings("lightbox")||(this.elements.$coverImage.fadeOut(300),this.playVideo())}playVideo(){const e=this.elements.$videoHosted;if(e.length){const t=e.data("lazy-load");return t&&e.attr("src",t),void e[0].play()}const t=this.elements.$videoIframe,i=t.data("lazy-load");i&&t.attr("src",i);const s=t.attr("src"),n=s.replace(/&muted*=[a-z\d]*/,"").replace(/&autoplay=[a-z\d]*/,"");let o="&autoplay=1",a="&mute=true",l="";if(s.includes("vimeo.com")){const e=s.indexOf("#t=");a="&muted=true",l=`${s.slice(0,e)}${o}${a}${s.slice(e)}`}else s.includes("twitch.tv")?o="&autoplay=yes":s.includes("facebook.com")&&(o="&autoplay=true"),l=`${n}${o}${a}`;t.attr("src",l)}onElementChange(e){const t=elementorFrontend.config.elements.data[this.getModelCID()].options.controls[e];t&&"section_lightbox_style"!==t.section&&this.hideLightbox(),0!==e.indexOf("lightbox_content_animation")?"lightbox"!==e||this.getElementSettings("lightbox")?"aspect_ratio"===e&&this.getElementSettings("lightbox")&&this.handleAspectRatio():this.hideLightbox():this.animateVideo()}async hideLightbox(){(await elementorFrontend.utils.lightbox).getModal().hide()}async getLightbox(){return await elementorFrontend.utils.lightbox}async animateVideo(){(await elementorFrontend.utils.lightbox).setEntranceAnimation(this.getCurrentDeviceSetting("lightbox_animation_entrance"))}async handleAspectRatio(){const e=await elementorFrontend.utils.lightbox,t=this.getElementSettings("aspect_ratio");"custom"===t&&this.getElementSettings("aspect_ratio_custom").size;e.setVideoAspectRatio(t)}}t.default=Video}}]);