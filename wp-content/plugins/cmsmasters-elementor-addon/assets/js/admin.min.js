/*! cmsmasters-elementor-addon - v1.18.4 - 21-09-2025 */
(()=>{var e={5615:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=s(n(1121)),i=s(n(8724)),l=s(n(1173)),u=s(n(4910));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,l.default)(this,n)}}var c=function(e){(0,i.default)(_default,e);var t=_createSuper(_default);function _default(){return(0,r.default)(this,_default),t.apply(this,arguments)}return(0,a.default)(_default,[{key:"__construct",value:function __construct(){(0,o.default)((0,u.default)(_default.prototype),"__construct",this).apply(this,arguments),this.fileWasUploaded=!1,this.alertWidget=!1}},{key:"getDefaultSettings",value:function getDefaultSettings(){return{selectors:{postForm:"#post"}}}},{key:"getDefaultElements",value:function getDefaultElements(){var e=this.getSettings().selectors,t={$publishButton:jQuery("#publish"),$publishButtonSpinner:jQuery("#publishing-action > .spinner")};return jQuery.each(e,(function(e,n){t["$".concat(e)]=jQuery(n)})),t}},{key:"bindEvents",value:function bindEvents(){var e=this.getSettings().selectors;jQuery(e.postForm).on("submit",this.handleSubmit.bind(this))}},{key:"handleSubmit",value:function handleSubmit(e){var t=this;if(!this.fileWasUploaded)return this.checkInputsForValues()?(this.fileWasUploaded=!0,void this.elements.$postForm.submit()):(e.preventDefault(),this.showAlertDialog("noData",this.notice,(function(){return t.onDialogDismiss()}),(function(){return t.onDialogDismiss()})),!1)}},{key:"showAlertDialog",value:function showAlertDialog(e,t){var n={id:e,message:t};2<arguments.length&&void 0!==arguments[2]&&(n.onConfirm=arguments[2]),3<arguments.length&&void 0!==arguments[3]&&(n.onHide=arguments[3]),this.alertWidget||(this.alertWidget=elementorCommon.dialogsManager.createWidget("alert",n)),this.alertWidget.show()}},{key:"onDialogDismiss",value:function onDialogDismiss(){this.elements.$publishButton.removeClass("disabled"),this.elements.$publishButtonSpinner.removeClass("is-active")}},{key:"translate",value:function translate(e,t){return elementorCommon.translate(e,null,t,elementorCmsmastersAdminConfig.i18n)}}]),_default}(elementorModules.ViewModule);t.default=c},6015:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=s(n(6367)),i=function(){function _default(){(0,r.default)(this,_default),this.localIcons=new o.default,this.bindEvents()}return(0,a.default)(_default,[{key:"bindEvents",value:function bindEvents(){jQuery("#cmsmasters-regenerate-local-icons-button").on("click",(function(e){e.preventDefault();var t=jQuery(this);t.removeClass("success").addClass("loading"),jQuery.post(ajaxurl,{action:"cmsmasters_regenerate_local_icons",_nonce:t.data("nonce")}).done((function(){t.removeClass("loading").addClass("success")}))}))}}]),_default}();t.default=i},6367:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(131)),a=s(n(8983)),o=s(n(2081)),i=s(n(1121)),l=s(n(8724)),u=s(n(1173)),c=s(n(4910)),d=s(n(5615)),f=s(n(2570));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(_default,e);var t=_createSuper(_default);function _default(){return(0,a.default)(this,_default),t.apply(this,arguments)}return(0,o.default)(_default,[{key:"__construct",value:function __construct(){(0,i.default)((0,c.default)(_default.prototype),"__construct",this).apply(this,arguments),this.parameters={metabox:"cmsmasters-local-icons-metabox",actionKey:"cmsmasters_icon_fonts_local_icons_set_upload"},this.dropZone=new f.default(this.parameters),this.notice=this.translate("iconsUploadEmptyNotice")}},{key:"getDefaultSettings",value:function getDefaultSettings(){var e=(0,i.default)((0,c.default)(_default.prototype),"getDefaultSettings",this).call(this).selectors,t="#cmsmasters-local-icons-template";return{classes:{editPageClass:"post-type-cmsmasters_icons",editPhp:"edit-php",hasIcons:"cmsmasters--has-icons"},selectors:Object.assign(e,{title:"#title",metaboxContainer:"#".concat(this.parameters.metabox),metabox:".".concat(this.parameters.metabox),dataInput:"#cmsmasters_icons_set_config",fileInput:"#zip_upload",dropZone:".zip_upload",submitMetabox:"#postbox-container-1",submitDelete:".submitdelete"}),templates:{header:jQuery("".concat(t,"-header")).html(),duplicatedPrefix:jQuery("".concat(t,"-duplicated-prefix")).html(),icon:'<li>\n\t\t\t\t<div class="icon">\n\t\t\t\t\t<i class="{{icon}}"></i>\n\t\t\t\t\t<div class="icon-name" title="{{label}}">{{label}}</div>\n\t\t\t\t</div>\n\t\t\t</li>'}}}},{key:"getDefaultElements",value:function getDefaultElements(){var e=(0,i.default)((0,c.default)(_default.prototype),"getDefaultElements",this).call(this),t=this.getSettings().selectors,n={$body:jQuery("body")};return jQuery.each(t,(function(e,t){n["$".concat(e)]=jQuery(t)})),Object.assign(e,n)}},{key:"bindEvents",value:function bindEvents(){(0,i.default)((0,c.default)(_default.prototype),"bindEvents",this).call(this),""!==this.getData()&&this.elements.$title.on("input change",this.onTitleInput.bind(this))}},{key:"getData",value:function getData(){var e=this.elements.$dataInput.val();return""!==e?JSON.parse(e):""}},{key:"onInit",value:function onInit(){var e=this.getSettings().classes,t=elementorCommon.elements.$body;if(t.hasClass(e.editPageClass)&&!t.hasClass(e.editPhp)){(0,i.default)((0,c.default)(_default.prototype),"onInit",this).call(this);var n=this.elements,s=n.$title,r=n.$metaboxContainer,a=n.$dropZone;s.prop("required",!0),r.removeClass("closed postbox").find("h2, button").remove();var o=this.getData();""!==o?this.renderIcons(o):(a.show(),this.dropZone.onSuccess=this.onSuccess.bind(this),this.dropZone.onError=this.onError.bind(this)),r.show()}}},{key:"removeCloseHandle",value:function removeCloseHandle(){var e=this.elements.$metaboxContainer;e.removeClass("closed postbox"),e.find("h2").remove(),e.find("button").remove()}},{key:"renderIcons",value:function renderIcons(e){var t=this.getSettings(),n=t.classes,s=t.templates,r=this.elements,a=r.$body,o=r.$metaboxContainer,i=r.$metabox,l=r.$submitMetabox;a.addClass(n.hasIcons),l.show(),this.setData(e),this.enqueueCSS(e.url),i.html(""),o.prepend(elementorCommon.compileTemplate(s.header,e)),i.append("<ul>".concat(this.renderIconList(e),"</ul>"))}},{key:"setData",value:function setData(e){this.elements.$dataInput.val(JSON.stringify(e))}},{key:"enqueueCSS",value:function enqueueCSS(e){var t=elementorCommon.elements.$document;if(!t.find('link[href="'.concat(e,'"]')).length){var n=jQuery("<link>",{href:e,rel:"stylesheet",type:"text/css"});t.find("link:last").after(n)}}},{key:"renderIconList",value:function renderIconList(e){var t=this,n=this.getSettings().templates;return e.icons.map((function(s){var r={icon:"".concat(e.displayPrefix," ").concat(e.prefix).concat(s),label:t.prepareIconName(s)};return elementorCommon.compileTemplate(n.icon,r)})).join("\n")}},{key:"prepareIconName",value:function prepareIconName(e){var t=e.replace(/[_-]/g," ");return elementorCommon.helpers.upperCaseWords(t)}},{key:"onSuccess",value:function onSuccess(e){var t=this,n=e.config;if(n.duplicatedPrefix){delete n.duplicatedPrefix;var s=this.getSettings("templates").duplicatedPrefix;return this.showAlertDialog("duplicated-prefix",s,(function(){return t.saveInitialUpload(n)}))}this.saveInitialUpload(n)}},{key:"saveInitialUpload",value:function saveInitialUpload(e){this.setData(e);var t=this.elements.$title;this.elements.$submitMetabox.show(),""===t.val()&&(t.prev().addClass("screen-reader-text"),t.val(e.label)),this.fileWasUploaded=!0,this.elements.$publishButton.click()}},{key:"onError",value:function onError(e){var t=Object.entries(e.errors),n=(0,r.default)(t[0],2),s=n[0],a=n[1];return this.showAlertDialog(s,a)}},{key:"onTitleInput",value:function onTitleInput(e){var t=this.getData();t.label=e.target.value,this.setData(t)}},{key:"checkInputsForValues",value:function checkInputsForValues(){return""!==this.elements.$fileInput.val()||""!==this.elements.$dataInput.val()}}]),_default}(d.default);t.default=m},5352:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2081)),a=s(n(8983)),o=s(n(3386)),i=(0,r.default)((function _default(){(0,a.default)(this,_default),this.editButton=new o.default}));t.default=i},3386:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=s(n(8724)),i=s(n(1173)),l=s(n(4910));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,i.default)(this,n)}}var u=function(e){(0,o.default)(_default,e);var t=_createSuper(_default);function _default(){return(0,r.default)(this,_default),t.apply(this,arguments)}return(0,a.default)(_default,[{key:"getDefaultSettings",value:function getDefaultSettings(){return{selectors:{select:".elementor-widget-template-select",edit:".elementor-edit-template"}}}},{key:"getDefaultElements",value:function getDefaultElements(){return{$document:jQuery(document)}}},{key:"bindEvents",value:function bindEvents(){var e=this.getSettings().selectors;this.elements.$document.on("change",e.select,this.handleChange.bind(this))}},{key:"handleChange",value:function handleChange(e){var t=this.getSettings().selectors,n=jQuery(e.target),s=n.val(),r=n.find('[value="'.concat(s,'"]')).data("type"),a=n.parents("p").next(t.edit);if("cmsmasters_entry"!==r){var o="".concat(elementorAdmin.config.home_url,"?p=").concat(s,"&elementor");a.show().find(".button").attr("href",o)}else a.hide()}}]),_default}(elementorModules.ViewModule);t.default=u},9108:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2081)),a=s(n(8983)),o=s(n(627)),i=(0,r.default)((function _default(){(0,a.default)(this,_default),this.modifyTemplateDialog=new o.default}));t.default=i},627:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=function(){function _default(){(0,r.default)(this,_default),this.selectors={templateTypeField:"template-type",archiveTypeWrapper:"archive-type__wrapper",singularTypeWrapper:"singular-type__wrapper",entryTypeWrapper:"entry-type__wrapper",productsArchiveTypeWrapper:"products-archive-type__wrapper",tribeEventsArchiveTypeWrapper:"tribe-events-archive-type__wrapper"},this.elements={},jQuery(setTimeout.bind(window,this.setup.bind(this)))}return(0,a.default)(_default,[{key:"setup",value:function setup(){window.elementorNewTemplate&&(this.modal=elementorNewTemplate.layout.getModal(),this.init())}},{key:"init",value:function init(){this.setDefaultElements(),this.setCmsmastersOptions(),this.onTemplateTypeChange(),this.bindEvents()}},{key:"setDefaultElements",value:function setDefaultElements(){var e=this;jQuery.each(this.selectors,(function(t,n){e.elements["$".concat(t)]=e.modal.getElements("content").find("#elementor-new-template__form__".concat(n))}))}},{key:"setCmsmastersOptions",value:function setCmsmastersOptions(){this.elements.$templateTypeField.find("option[value^=cmsmasters_]").wrapAll('<optgroup label="'.concat(cmsmastersElementorAdmin.translate("cmsmasters"),'"></optgroup>'))}},{key:"onTemplateTypeChange",value:function onTemplateTypeChange(){var e=this.elements.$templateTypeField.val();this.elements.$archiveTypeWrapper.toggle("cmsmasters_archive"===e),this.elements.$singularTypeWrapper.toggle("cmsmasters_singular"===e),this.elements.$entryTypeWrapper.toggle("cmsmasters_entry"===e),this.elements.$productsArchiveTypeWrapper.toggle("cmsmasters_product_archive"===e),this.elements.$tribeEventsArchiveTypeWrapper.toggle("cmsmasters_tribe_events_archive"===e)}},{key:"bindEvents",value:function bindEvents(){this.elements.$templateTypeField.change(this.onTemplateTypeChange.bind(this))}}]),_default}();t.default=o},9801:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2081)),a=s(n(8983)),o=s(n(9736)),i=s(n(3957)),l=(0,r.default)((function _default(){(0,a.default)(this,_default),this.megamenuOptions=new o.default,this.megamenuAddTemplate=new i.default}));t.default=l},3957:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=function(){function _default(){(0,r.default)(this,_default),this.selectors={createTemplateButton:".cmsmasters-megamenu-create-template-button",newTemplateArea:".cmsmasters-megamenu-new-template-area",newTemplateAreaClose:".cmsmasters-megamenu-new-template-area__close",newTemplateIframe:"#cmsmasters-megamenu-new-template-iframe",newTemplateURL:"#cmsmasters-megamenu-new-template-url"},this.init()}return(0,a.default)(_default,[{key:"init",value:function init(){this.bindEvents()}},{key:"bindEvents",value:function bindEvents(){jQuery(document).on("click",this.selectors.createTemplateButton,this.runCreateTemplate.bind(this)),jQuery(this.selectors.newTemplateAreaClose).on("click",this.closeCreateTemplate.bind(this))}},{key:"runCreateTemplate",value:function runCreateTemplate(e){e.preventDefault(),jQuery("html").addClass("cmsmasters-megamenu-new-template-opened");var t=jQuery(this.selectors.newTemplateURL).val();jQuery(this.selectors.newTemplateIframe).attr("src",t),jQuery(this.selectors.newTemplateArea).show("fast")}},{key:"closeCreateTemplate",value:function closeCreateTemplate(){jQuery(this.selectors.newTemplateArea).hide("fast"),jQuery("html").removeClass("cmsmasters-megamenu-new-template-opened"),jQuery(this.selectors.newTemplateIframe).attr("src","about:blank")}}]),_default}();t.default=o},9736:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=function(){function _default(){(0,r.default)(this,_default),this.selectors={menu:"#menu-to-edit",megaFields:".cmsmasters-megamenu-fields",megaStatus:".cmsmasters-megamenu-status",megaStatusField:".field-cmsmasters-megamenu-status",megaType:".cmsmasters-megamenu-type",megaTypeField:".field-cmsmasters-megamenu-type",megaTemplate:".cmsmasters-megamenu-template",megaTemplateField:".field-cmsmasters-megamenu-template",megaInnerType:".cmsmasters-megamenu-inner_type"},this.init()}return(0,a.default)(_default,[{key:"init",value:function init(){this.bindEvents(),void 0!==jQuery.fn.select2&&jQuery(this.selectors.megaTemplate).select2({ajax:{url:ajaxurl,dataType:"json",data:{action:"cmsmasters_megamenu_options_get_templates_list"},processResults:function processResults(e){return{results:e}},cache:!0}})}},{key:"bindEvents",value:function bindEvents(){var e=[this.selectors.megaStatus,this.selectors.megaType];jQuery(window).on("load",this.loadFields.bind(this)),jQuery(document).on("change",e.join(","),this.changeFields.bind(this)),jQuery(document).on("click",".field-move .menus-move-up, .field-move .menus-move-down, .field-move .menus-move-left, .field-move .menus-move-right, .field-move .menus-move-top",this.moveItem.bind(this)),jQuery(this.selectors.menu).on("sortstop",this.sortItem.bind(this))}},{key:"loadFields",value:function loadFields(){var e=this;jQuery(this.selectors.megaFields).each((function(t,n){var s=jQuery(this),r=s.find(e.selectors.megaStatus+":checked"),a=s.find(e.selectors.megaType+":checked"),o=s.closest(".menu-item.menu-item-depth-0"),i=o.find(".menu-item-title");"enable"===r.val()&&(i.after('<span class="cmsmasters-is-megamenu">'.concat(elementorCmsmastersAdminConfig.i18n.megamenu.mega_menu,"</span>")),"wp-menu"===a.val()&&o.nextUntil(".menu-item-depth-0").each((function(){1===jQuery(this).menuItemDepth()&&jQuery(this).find(".is-submenu").after('<span class="cmsmasters-is-megamenu-column">'.concat(elementorCmsmastersAdminConfig.i18n.megamenu.column,"</span>"))})),"template"===a.val()&&o.nextUntil(".menu-item-depth-0").addClass("cmsmasters-inactive"))})).bind(e)}},{key:"sortItem",value:function sortItem(e,t){setTimeout(function(){var e=jQuery(t.item).prevAll(".menu-item.menu-item-depth-0"),n=e.length,s=this.selectors.megaStatus+":checked",r=n>0?jQuery(e[0]).find(s):jQuery(t.item).find(s);jQuery(t.item).hasClass("menu-item-depth-0")&&(r=jQuery(t.item).find(s)),r.trigger("change")}.bind(this),250)}},{key:"moveItem",value:function moveItem(e){setTimeout(function(){var t=jQuery(e.currentTarget).closest(".menu-item").prevAll(".menu-item.menu-item-depth-0"),n=t.length,s=this.selectors.megaStatus+":checked",r=n>0?jQuery(t[0]).find(s):jQuery(e.currentTarget).closest(".menu-item").find(s);jQuery(e.currentTarget).closest(".menu-item").hasClass("menu-item-depth-0")&&(r=jQuery(e.currentTarget).closest(".menu-item").find(s)),r.trigger("change")}.bind(this),250),e.preventDefault()}},{key:"changeFields",value:function changeFields(e){var t=jQuery(e.target).closest(this.selectors.megaFields),n=t.find(this.selectors.megaStatus+":checked"),s=t.find(this.selectors.megaType+":checked"),r=t.find(this.selectors.megaTypeField),a=t.find(this.selectors.megaTemplateField),o=t.closest(".menu-item.menu-item-depth-0"),i=o.find(".menu-item-title");o.find(".cmsmasters-is-megamenu").remove(),o.find(".cmsmasters-is-megamenu-column").remove(),o.removeClass("cmsmasters-inactive"),o.nextUntil(".menu-item-depth-0").find(".cmsmasters-is-megamenu").remove(),"enable"===n.val()?(r.removeClass("cmsmasters-hide"),i.find(".cmsmasters-is-megamenu").remove(),i.after('<span class="cmsmasters-is-megamenu">'.concat(elementorCmsmastersAdminConfig.i18n.megamenu.mega_menu,"</span>")),o.nextUntil(".menu-item-depth-0").find(this.selectors.megaInnerType).val(s.val())):(r.addClass("cmsmasters-hide"),i.find(".cmsmasters-is-megamenu").remove(),o.nextUntil(".menu-item-depth-0").find(this.selectors.megaInnerType).val("standard")),"enable"===n.val()&&"wp-menu"===s.val()?o.nextUntil(".menu-item-depth-0").each((function(){1===jQuery(this).menuItemDepth()?(jQuery(this).find(".cmsmasters-is-megamenu-column").remove(),jQuery(this).find(".is-submenu").after('<span class="cmsmasters-is-megamenu-column">'.concat(elementorCmsmastersAdminConfig.i18n.megamenu.column,"</span>"))):jQuery(this).find(".cmsmasters-is-megamenu-column").remove()})):o.nextUntil(".menu-item-depth-0").find(".cmsmasters-is-megamenu-column").remove(),"enable"===n.val()&&"template"===s.val()?(a.removeClass("cmsmasters-hide"),o.nextUntil(".menu-item-depth-0").addClass("cmsmasters-inactive")):(a.addClass("cmsmasters-hide"),o.nextUntil(".menu-item-depth-0").removeClass("cmsmasters-inactive"))}}]),_default}();t.default=o},3052:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8983)),a=s(n(2081)),o=s(n(2017)),i=function(){function _default(){(0,r.default)(this,_default),this.localFonts=new o.default,this.bindEvents()}return(0,a.default)(_default,[{key:"bindEvents",value:function bindEvents(){jQuery("#cmsmasters-regenerate-local-fonts-button").on("click",(function(e){e.preventDefault();var t=jQuery(this);t.removeClass("success").addClass("loading"),jQuery.post(ajaxurl,{action:"cmsmasters_regenerate_local_fonts",_nonce:t.data("nonce")}).done((function(){t.removeClass("loading").addClass("success")}))}))}}]),_default}();t.default=i},2017:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(131)),a=s(n(8983)),o=s(n(2081)),i=s(n(1121)),l=s(n(8724)),u=s(n(1173)),c=s(n(4910)),d=s(n(5615)),f=s(n(2570));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(_default,e);var t=_createSuper(_default);function _default(){return(0,a.default)(this,_default),t.apply(this,arguments)}return(0,o.default)(_default,[{key:"__construct",value:function __construct(){(0,i.default)((0,c.default)(_default.prototype),"__construct",this).apply(this,arguments),this.parameters={metabox:"cmsmasters-local-font-metabox",actionKey:"cmsmasters_local_font_upload"},this.dropZone=new f.default(this.parameters),this.notice=this.translate("localFontEmptyUploadNotice")}},{key:"getDefaultSettings",value:function getDefaultSettings(){var e=(0,i.default)((0,c.default)(_default.prototype),"getDefaultSettings",this).call(this).selectors,t="#cmsmasters-local-font-template";return{classes:{editPageClass:"post-type-cmsms_local_fonts",editPhp:"edit-php",hasFontFaces:"cmsmasters--has-font-faces"},selectors:Object.assign(e,{title:"#title",metaboxContainer:"#".concat(this.parameters.metabox),metabox:".".concat(this.parameters.metabox),dataInput:"#cmsmasters_local_font_config",fileInput:"#zip_upload",dropZone:".zip_upload",submitMetabox:"#postbox-container-1",submitDelete:".submitdelete"}),templates:{header:jQuery("".concat(t,"-header")).html(),duplicatedFont:jQuery("".concat(t,"-duplicated-font")).html(),fontFaces:'<li>\n\t\t\t\t<div class="font-face">\n\t\t\t\t\t<div class="font-phrase" title="{{typeString}}" style="{{phraseStyle}}">{{phrase}}</div>\n\t\t\t\t\t<div class="font-weight" title="{{fontWeightLabel}}: {{fontWeightText}}">\n\t\t\t\t\t\t<i class="dashicons dashicons-editor-bold"></i>\n\t\t\t\t\t\t<span style="font-weight: {{fontWeight}};">{{fontWeightText}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="font-style" title="{{fontStyleLabel}}: {{fontStyleText}}">\n\t\t\t\t\t\t<i class="dashicons dashicons-editor-italic"></i>\n\t\t\t\t\t\t<span style="font-style: {{fontStyle}};">{{fontStyleText}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>'}}}},{key:"getDefaultElements",value:function getDefaultElements(){var e=(0,i.default)((0,c.default)(_default.prototype),"getDefaultElements",this).call(this),t=this.getSettings().selectors,n={$body:jQuery("body")};return jQuery.each(t,(function(e,t){n["$".concat(e)]=jQuery(t)})),Object.assign(e,n)}},{key:"bindEvents",value:function bindEvents(){(0,i.default)((0,c.default)(_default.prototype),"bindEvents",this).call(this),""!==this.getData()&&this.elements.$title.on("input change",this.onTitleInput.bind(this))}},{key:"getData",value:function getData(){var e=this.elements.$dataInput.val();return""!==e?JSON.parse(e):""}},{key:"onInit",value:function onInit(){var e=this.getSettings().classes,t=elementorCommon.elements.$body;if(t.hasClass(e.editPageClass)&&!t.hasClass(e.editPhp)){(0,i.default)((0,c.default)(_default.prototype),"onInit",this).call(this);var n=this.elements,s=n.$title,r=n.$metaboxContainer,a=n.$dropZone;s.prop("required",!0),r.removeClass("closed postbox").find("h2, button").remove();var o=this.getData();""!==o?this.renderFontFaces(o):(a.show(),this.dropZone.onSuccess=this.onSuccess.bind(this),this.dropZone.onError=this.onError.bind(this)),r.show()}}},{key:"renderFontFaces",value:function renderFontFaces(e){var t=this.getSettings(),n=t.classes,s=t.templates,r=this.elements,a=r.$body,o=r.$metaboxContainer,i=r.$metabox,l=r.$submitMetabox;a.addClass(n.hasFontFaces),l.show(),this.setData(e),this.enqueueCSS(e.url),i.html(""),e.formats=e.formats.join(", "),o.prepend(elementorCommon.compileTemplate(s.header,e)),i.append("<ul>".concat(this.renderFontFacesList(e),"</ul>"))}},{key:"setData",value:function setData(e){this.elements.$dataInput.val(JSON.stringify(e))}},{key:"enqueueCSS",value:function enqueueCSS(e){var t=elementorCommon.elements.$document;if(!t.find('link[href="'.concat(e,'"]')).length){var n=jQuery("<link>",{href:e,rel:"stylesheet",type:"text/css"});t.find("link:last").after(n)}}},{key:"renderFontFacesList",value:function renderFontFacesList(e){var t=this,n=this.getSettings().templates,s=e.font_faces,r=e.label;return s.sort((function(e,n){var s=t.convertFontWeight(e["font-weight"]),r=t.convertFontWeight(n["font-weight"]);if(s<r)return-1;if(s>r)return 1;var a=t.getFontStyleOrder(e["font-style"]),o=t.getFontStyleOrder(n["font-style"]);return a<o?-1:a>o?1:0})).map((function(e){var s=e["font-weight"],a=e["font-style"],o=t.getFontType(s.toLowerCase(),a.toLowerCase()),i={phrase:t.translate("fontPreviewPhrase"),phraseStyle:"font-family: '".concat(r,"'; font-weight: ").concat(s,"; font-style: ").concat(a,";"),typeString:o.string,fontWeight:s,fontWeightLabel:t.translate("fontWeight"),fontWeightText:elementorCommon.helpers.upperCaseWords(s),typeWeight:o.weight,fontStyle:a,fontStyleLabel:t.translate("fontStyle"),fontStyleText:elementorCommon.helpers.upperCaseWords(a),typeStyle:o.style};return elementorCommon.compileTemplate(n.fontFaces,i)})).join("\n")}},{key:"convertFontWeight",value:function convertFontWeight(e){return"normal"===e?e="400":"bold"===e&&(e="700"),e}},{key:"getFontStyleOrder",value:function getFontStyleOrder(e){var t=0;switch(e){case"italic":t=1;break;case"oblique":t=2}return t}},{key:"getFontType",value:function getFontType(e,t){e=this.convertFontWeight(e);var n={},s=this.translate("fontWeightArray");return n.weight="".concat(e," ").concat(s[e]),n.style=elementorCommon.helpers.upperCaseWords(t),n.string=n.weight,"normal"!==t&&(n.string+=" ".concat(n.style)),n}},{key:"onSuccess",value:function onSuccess(e){var t=this,n=e.config;if(n.duplicatedFont){delete n.duplicatedFont;var s=this.getSettings("templates").duplicatedFont;return this.showAlertDialog("duplicated-font",s,(function(){return t.saveInitialUpload(n)}))}this.saveInitialUpload(n)}},{key:"saveInitialUpload",value:function saveInitialUpload(e){this.setData(e);var t=this.elements.$title;this.elements.$submitMetabox.show(),""===t.val()&&(t.prev().addClass("screen-reader-text"),t.val(e.label)),this.fileWasUploaded=!0,this.elements.$publishButton.click()}},{key:"onError",value:function onError(e){var t=Object.entries(e.errors),n=(0,r.default)(t[0],2),s=n[0],a=n[1];return this.showAlertDialog(s,a)}},{key:"onTitleInput",value:function onTitleInput(e){var t=this.getData();t.label=e.target.value,t.name=e.target.value.toLowerCase().replace(/\s/,"-"),this.setData(t)}},{key:"checkInputsForValues",value:function checkInputsForValues(){return""!==this.elements.$fileInput.val()||""!==this.elements.$dataInput.val()}}]),_default}(d.default);t.default=m},2570:(e,t,n)=>{"use strict";var s=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(131)),a=s(n(8983)),o=s(n(2081)),i=s(n(1121)),l=s(n(8724)),u=s(n(1173)),c=s(n(4910));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,u.default)(this,n)}}var d=function(e){(0,l.default)(_default,e);var t=_createSuper(_default);function _default(){return(0,a.default)(this,_default),t.apply(this,arguments)}return(0,o.default)(_default,[{key:"__construct",value:function __construct(e){(0,i.default)((0,c.default)(_default.prototype),"__construct",this).call(this,e),this.metabox=e.metabox,this.actionKey=e.actionKey,this.prevTarget=null,this.onSuccess=null,this.onError=null}},{key:"getDefaultSettings",value:function getDefaultSettings(){var e="#".concat(this.metabox," .elementor-field-dropzone");return{classes:{drag:"is-dragover",upload:"is-uploading",success:"is-success",error:"is-error",inputBox:"box__input"},selectors:{dropZone:"".concat(e),input:"".concat(e,' [type="file"]'),errorBox:"".concat(e," .box__error"),browseButton:"".concat(e," .elementor--dropzone--upload__browse"),postId:"#post_ID"},droppedFiles:!1}}},{key:"getDefaultElements",value:function getDefaultElements(){var e=this.getSettings().selectors,t={};return jQuery.each(e,(function(e,n){t["$".concat(e)]=jQuery(n)})),t}},{key:"bindEvents",value:function bindEvents(){var e=this.getSettings().classes,t=this.elements,n=t.$browseButton,s=t.$input,r=t.$dropZone;n.on("click",(function(){return s.click()}));r.on(["drag","dragstart","dragover","dragenter","dragend","dragleave","drop"].join(" "),(function(e){e.preventDefault(),e.stopPropagation()})).on("dragover dragenter",(function(){return r.addClass(e.drag)})).on("dragend dragleave",this.dragLeaveEventHandler.bind(this)).on("drop change",this.dropEventHandler.bind(this))}},{key:"onInit",value:function onInit(){(0,i.default)((0,c.default)(_default.prototype),"onInit",this).call(this),elementorCommon.elements.$document.trigger("onDropzoneLoaded",[this])}},{key:"dragLeaveEventHandler",value:function dragLeaveEventHandler(e){var t=this.getSettings().classes,n=e.relatedTarget.tagName.toLowerCase(),s=""!==e.relatedTarget.className?"".concat(n,".").concat(e.relatedTarget.className):n;["div.elementor--dropzone--upload__icon","i.eicon-library-upload","h4"].includes(s)||this.prevTarget&&"div.".concat(t.inputBox)!==this.prevTarget?this.prevTarget=s:(this.elements.$dropZone.removeClass(t.drag),this.prevTarget=null)}},{key:"dropEventHandler",value:function dropEventHandler(e){var t=this.elements.$dropZone,n=this.getSettings().classes;this.prevTarget=null,t.removeClass(n.drag).addClass(n.upload),"change"===e.type?(t.addClass(n.upload),this.setSettings("droppedFiles",e.originalEvent.target.files)):this.setSettings("droppedFiles",e.originalEvent.dataTransfer.files),this.handleUpload()}},{key:"handleUpload",value:function handleUpload(){var e=this,t=arguments,n=this.getSettings(),s=n.classes,r=n.droppedFiles;if(r){var a=this.elements,o=a.$dropZone,i=a.$input,l=a.$postId,u=a.$errorBox,c=new FormData,d=i.attr("name");Object.entries(r).forEach((function(e){c.append(d,e[1])}));var f={};f[this.actionKey]={action:this.actionKey,data:{post_id:l.val()}},c.append("actions",JSON.stringify(f)),o.removeClass("".concat(s.success," ").concat(s.error)),elementorCommon.ajax.send("ajax",{data:c,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,complete:function complete(){o.removeClass(s.upload)},success:function success(t){var n=t.responses[e.actionKey],success=n.success,r=n.data;success&&!r.errors?(o.addClass(s.success),e.onSuccess&&e.onSuccess(r,e)):(o.addClass(s.error),e.parseErrors(r.errors),setTimeout((function(){u.fadeOut("normal",(function(){o.removeClass(s.error),u.removeAttr("style").find("span").remove()}))}),7e3),e.onError&&e.onError(r,e))},error:function error(){o.removeClass(s.upload).addClass(s.error),e.onError&&e.onError(t,e)}})}}},{key:"parseErrors",value:function parseErrors(e){var t=this;Object.entries(e).forEach((function(e){var n=(0,r.default)(e,2),s=n[0],a=n[1],o=jQuery("<span>",{class:s}).text(a);t.elements.$errorBox.append(o)}))}}]),_default}(elementorModules.ViewModule);t.default=d},8106:e=>{e.exports=function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s},e.exports.__esModule=!0,e.exports.default=e.exports},7358:e=>{e.exports=function _arrayWithHoles(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},7266:e=>{e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8983:e=>{e.exports=function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},2081:(e,t,n)=>{var s=n(4040);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}e.exports=function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},1121:(e,t,n)=>{var s=n(9443);function _get(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=_get=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=_get=function _get(e,t,n){var r=s(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),_get.apply(this,arguments)}e.exports=_get,e.exports.__esModule=!0,e.exports.default=e.exports},4910:e=>{function _getPrototypeOf(t){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,_getPrototypeOf(t)}e.exports=_getPrototypeOf,e.exports.__esModule=!0,e.exports.default=e.exports},8724:(e,t,n)=>{var s=n(6196);e.exports=function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},3203:e=>{e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},608:e=>{e.exports=function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,r,a,o,i=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=a.call(n)).done)&&(i.push(s.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},6894:e=>{e.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1173:(e,t,n)=>{var s=n(7501).default,r=n(7266);e.exports=function _possibleConstructorReturn(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6196:e=>{function _setPrototypeOf(t,n){return e.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,_setPrototypeOf(t,n)}e.exports=_setPrototypeOf,e.exports.__esModule=!0,e.exports.default=e.exports},131:(e,t,n)=>{var s=n(7358),r=n(608),a=n(5068),o=n(6894);e.exports=function _slicedToArray(e,t){return s(e)||r(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},9443:(e,t,n)=>{var s=n(4910);e.exports=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},6027:(e,t,n)=>{var s=n(7501).default;e.exports=function _toPrimitive(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4040:(e,t,n)=>{var s=n(7501).default,r=n(6027);e.exports=function _toPropertyKey(e){var t=r(e,"string");return"symbol"===s(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},7501:e=>{function _typeof(t){return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof(t)}e.exports=_typeof,e.exports.__esModule=!0,e.exports.default=e.exports},5068:(e,t,n)=>{var s=n(8106);e.exports=function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function __webpack_require__(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,__webpack_require__),r.exports}(()=>{"use strict";var e=__webpack_require__(3203),t=e(__webpack_require__(8983)),n=e(__webpack_require__(2081)),s=e(__webpack_require__(1121)),r=e(__webpack_require__(8724)),a=e(__webpack_require__(1173)),o=e(__webpack_require__(4910)),i=e(__webpack_require__(5352)),l=e(__webpack_require__(9108)),u=e(__webpack_require__(9801)),c=e(__webpack_require__(6015)),d=e(__webpack_require__(3052));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,s=(0,o.default)(e);if(t){var r=(0,o.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,a.default)(this,n)}}var f=function(e){(0,r.default)(CmsmastersElementorAdmin,e);var a=_createSuper(CmsmastersElementorAdmin);function CmsmastersElementorAdmin(){return(0,t.default)(this,CmsmastersElementorAdmin),a.apply(this,arguments)}return(0,n.default)(CmsmastersElementorAdmin,[{key:"__construct",value:function __construct(){(0,s.default)((0,o.default)(CmsmastersElementorAdmin.prototype),"__construct",this).call(this,arguments),this.config=elementorCmsmastersAdminConfig,this.handlers={libraryTemplate:i.default,templatePages:l.default,templateSections:u.default,iconFonts:c.default,webFonts:d.default},this.modules={},this.initModules()}},{key:"initModules",value:function initModules(){var e=this;jQuery.each(this.handlers,(function(t,n){e.modules[t]=new n}))}},{key:"translate",value:function translate(e,t){return elementorCommon.translate(e,null,t,this.config.i18n)}},{key:"firstToLower",value:function firstToLower(e){return e.replace(/^\w/,(function(e){return e.toLowerCase()}))}}]),CmsmastersElementorAdmin}(elementorModules.ViewModule);window.cmsmastersElementorAdmin=new f})()})();