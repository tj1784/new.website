/*! cmsmasters-elementor-addon - v1.18.4 - 21-09-2025 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[9517],{2277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends elementorModules.frontend.handlers.Base{__construct(){super.__construct(...arguments),this.bindElements=[],this.deviceNames=["mobile","tablet","desktop"],this.devicePrefixMaps={mobile:"mobile",tablet:"tablet",desktop:""}}bindElementChange(e,t){this.bindElements.push([e,t])}onElementChange(e){this.bindElements&&this.bindElements.length&&this.bindElements.forEach((t=>{let[s]=t;Array.isArray(s)||(s=s.split(/\s/));const[,o]=t;s.some((t=>{if(-1!==[t,`${t}_tablet`,`${t}_mobile`].indexOf(e))return o(...arguments),!0}))}))}onDestroy(){this.trigger("destroy:before"),super.onDestroy()}getCurrentDeviceSettingInherit(e){const t=["desktop","tablet","mobile"],s=elementorFrontend.getCurrentDeviceMode(),o=this.getElementSettings();let n=t.indexOf(s);for(;n>0;){const s=o[e+"_"+t[n]];if(s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"size")&&s.size)return s;n--}return o[e]}getCurrentDeviceSettingSize(e){let t=this.getCurrentDeviceSettingInherit(e);return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"size")&&(t=t.size),t}}t.default=_default},4293:(e,t,s)=>{var o=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s(2277)),r=o(s(2533));class AddToCart extends n.default{__construct(e){super.__construct(e),this.keydownHelper=new r.default}getDefaultSettings(){return{selectors:{variations:".variations_form",wpcvsTerms:".wpcvs-terms",buttonWrap:".cmsmasters-add-to-cart",select:".variations select",button:".cmsmasters-add-to-cart-button",woocommerceNotices:":not(.woocommerce-NoticeGroup) .wc-block-components-notice-banner, .woocommerce-NoticeGroup, :not(.cmsmasters-wc-add-to-cart-message) .woocommerce-error, :not(.cmsmasters-wc-add-to-cart-message) .woocommerce-message, :not(.cmsmasters-wc-add-to-cart-message) .woocommerce-info, :not(.woocommerce-NoticeGroup) .woocommerce-error, :not(.woocommerce-NoticeGroup) .woocommerce-message, :not(.woocommerce-NoticeGroup) .woocommerce-info",noticesWrapper:".elementor-widget-cmsmasters-woo-notices__wrapper"}}}getDefaultElements(){const{selectors:e}=this.getSettings();return{$variations:this.findElement(e.variations),$wpcvsTerms:this.findElement(e.wpcvsTerms),$buttonWrap:this.findElement(e.button),$select:this.findElement(e.select),$button:this.findElement(e.button),$noticesWrapper:elementorFrontend.elements.$body.find(e.noticesWrapper),$woocommerceCheckoutForm:elementorFrontend.elements.$body.find(".form.checkout"),$documentScrollToElements:elementorFrontend.elements.$document.find("html, body")}}bindEvents(){super.bindEvents(),this.keydownHelper.bindAccessibleClick(this.elements.$wpcvsTerms,(e=>this.changeBadgeSale(e))),this.keydownHelper.bindAccessibleClick(this.elements.$button,(e=>this.addingToCartAjax(e)),{preventDefault:!1}),jQuery(document).on("reset_data",(()=>{this.changeBadgeSale()}))}onInit(){super.onInit(),this.changeBadgeSale()}run(){const e=this,t=e.requests[0].complete;e.requests[0].complete=function(){"function"==typeof t&&t(),e.requests.shift(),e.requests.length>0&&e.run()},jQuery.ajax(this.requests[0])}addRequest(e){this.requests=[],this.requests.push(e),1===this.requests.length&&this.run()}moveNotices(){const e=this.getSettings("selectors");let t=elementorFrontend.elements.$body.find(e.woocommerceNotices);(elementorFrontend.isEditMode()||elementorFrontend.isWPPreviewMode())&&(t=t.filter(":not(.e-notices-demo-notice)"));const s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s&&this.elements.$documentScrollToElements.stop(),this.elements.$noticesWrapper.prepend(t),this.is_ready||(this.elements.$noticesWrapper.removeClass("elementor-widget-cmsmasters-woo-notices__loading"),this.is_ready=!0),s){let e=t;e.length||(e=this.elements.$woocommerceCheckoutForm),e.length&&this.elements.$documentScrollToElements.animate({scrollTop:e.offset().top-document.documentElement.clientHeight/2},1e3)}}addingToCartAjax(e){const{selectors:t}=this.getSettings();if(this.isEdit)return;const s=jQuery(e.currentTarget);if(!s.attr("data-product_id"))return!0;if(e.preventDefault(),!1===jQuery(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[s]))return jQuery(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,s]),!0;const o={},n=s.closest("form"),r=n.serializeArray();if(s.hasClass("simple")){const e=s.closest(t.buttonWrap).find("input.qty").val();o.quantity=e?parseInt(e):1,jQuery.each(s.data(),(function(e,t){o[e]=t})),jQuery.each(s[0].dataset,(function(e,t){o[e]=t}))}else s.hasClass("variable")?(r.forEach((e=>{o[e.name]=e.value})),o.product_id=s.attr("data-product_id")):s.hasClass("grouped")&&(o["add-to-cart"]=s.attr("data-product_id"),o.product_id=s.attr("data-product_id"),o.quantity={},n.find("tr").each((function(){const e=jQuery(this),t=e.attr("id").replace(/^product-/,""),s=e.find("input.qty").val();s.length>0&&(o.quantity[t]=s)})));o._ajax_nonce=elementorCmsmastersFrontendConfig.nonces.ajax_widget,o.action="ajax_widget_cmsmasters-woo-product-add-to-cart",jQuery(document.body).trigger("adding_to_cart",[s,o]),this.addRequest({type:"POST",dataType:"json",url:elementorCmsmastersFrontendConfig.ajaxurl,data:o,beforeSend:function(){s.addClass("loading")},complete:function(){s.removeClass("loading")},success:e=>{e&&(e.error&&e.product_url?window.location=e.product_url:"undefined"==typeof wc_add_to_cart_params||"yes"!==wc_add_to_cart_params.cart_redirect_after_add?(jQuery(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,s]),this.elements.$noticesWrapper.find("> div").length>0&&this.elements.$noticesWrapper.find("> div").remove(),this.elements.$noticesWrapper.find("> ul").length>0&&this.elements.$noticesWrapper.find("> ul").remove(),e.fragments&&e.fragments.hasOwnProperty("notices_html")&&this.elements.$noticesWrapper.append(e.fragments.notices_html),this.moveNotices(!0)):window.location=wc_add_to_cart_params.cart_url)},dataType:"json"})}isMatch(e,t){let s=!0;for(const o in e)if(e.hasOwnProperty(o)){const n=e[o],r=t[o];void 0!==n&&void 0!==r&&0!==n.length&&0!==r.length&&n!==r&&(s=!1)}return s}findMatchingVariations(e,t){const s=[];if(e){for(let o=0;o<e.length;o++){const n=e[o];this.isMatch(n.attributes,t)&&s.push(n)}return s}}getChosenAttributes(){const e={};let t=0,s=0;return this.elements.$select.each((function(){const o=jQuery(this).data("attribute_name")||jQuery(this).attr("name"),n=jQuery(this).val()||"";n.length>0&&s++,t++,e[o]=n})),{count:t,chosenCount:s,data:e}}changeBadgeSale(e,t){let s="";jQuery("body").hasClass("single-product")?s=jQuery("body").find(".elementor-widget-cmsmasters-woo-badge-sale"):jQuery("body").find(".cmsmasters_product_entry")&&(s=jQuery(".cmsmasters_product_entry").find(".elementor-widget-cmsmasters-woo-badge-sale"));const o=this.elements.$variations.data("product_variations");if(!o)return;const n=void 0!==t?t:this.getChosenAttributes(),r=this.findMatchingVariations(o,n.data).shift(),i=r.display_price,a=r.display_regular_price;let c="";if(c=s.hasClass("cmsmasters-discoun-rounding-yes")?Math.round((a-i)/a*100):((a-i)/a*100).toFixed(1),0===c||"0.0"===c)s.hide();else{s.find(".cmsmasters-woo-badge-inner-text").text((function(e,t){const o=t.match(/[\d.]+/);if(!o)return s.show(),t;{const e=o[0];if(0!==e&&"0.0"!==e)return s.show(),t.replace(e,c);s.hide()}}))}}}t.default=AddToCart}}]);