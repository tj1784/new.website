/*! cmsmasters-elementor-addon - v1.18.4 - 21-09-2025 */
"use strict";(self.webpackChunkcmsmasters_elementor_addon=self.webpackChunkcmsmasters_elementor_addon||[]).push([[6075],{5738:(e,t,s)=>{var n=s(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(s(7674)),a=n(s(2277)),o=n(s(7537)),r=n(s(9945));const l=s(2363);class EventsGrid extends a.default{__construct(){super.__construct(...arguments),this.reLayoutDebounce=l.debounce(this.reLayoutDebounce.bind(this)),this.onResize=this.onResize.bind(this)}getDefaultSettings(){const e=super.getDefaultSettings(...arguments);return Object.assign(e,{selectors:{event:".cmsmasters-tribe-events__event",events:".cmsmasters-tribe-events__events"}})}getDefaultElements(){const{selectors:e}=this.getSettings(),t=this;return{$variable:this.findElement(".cmsmasters-tribe-events__events-variable"),get $events(){return t.findElement(e.events)},get $event(){return t.findElement(e.event)}}}bindEvents(){elementorFrontend.elements.$window.on("resize",this.onResize),this.on("ajaxInsertHTML:after",this.reLayout.bind(this)),this.bindElementChange(["columns_gap","masonry","rows_gap"],this.initMasonry.bind(this)),this.bindElementChange(["border_columns_type","border_vertical_width","columns","columns_gap"],this.initBorderColumn.bind(this)),this.bindElementChange(["border_columns_type","border_horizontal_width"],this.initBorderRow.bind(this))}onInit(){super.onInit(),this.elements.$variable.length&&(this.initPagination(),this.reLayout(),this.initAjaxWidget(),this.setCacheDefault())}initPagination(){this.pagination=new r.default(this),this.pagination.on("updatePage",this.onUpdatePage.bind(this)),this.pagination.on("click",this.onPagination.bind(this))}reLayout(){this.initMasonry(),this.initBorderColumn(),this.initBorderRow()}initMasonry(){if(this.removeMasonry(),!this.isMasonry())return;const e=parseInt(getComputedStyle(this.$element.get(0)).getPropertyValue("--cmsmasters-gap-row"));new elementorModules.utils.Masonry({container:elementorFrontend.elements.$body,items:this.elements.$event,columnsCount:this.getColumns(),verticalSpaceBetween:e}).run()}removeMasonry(){this.elements.$event.css({marginTop:""})}isMasonry(){return 1<this.getColumns()&&Boolean(this.getElementSettings("masonry"))}getColumns(){return Number(this.getCurrentDeviceSetting("columns"))}initBorderColumn(){this.borderColumns?this.borderColumns.update():this.borderColumns=new o.default({$container:()=>this.elements.$events,$items:()=>this.elements.$event,columns:()=>this.getColumns(),widget:this})}initBorderRow(){const e=this.getColumns(),t=this.getCurrentDeviceSetting("border_horizontal_width"),s=this.getElementSettings("border_columns_type");this.elements.$event.removeClass("separator-vertical"),s&&t&&this.elements.$event.filter(`:not(:nth-last-of-type(-n+${e}))`).addClass("separator-vertical")}initAjaxWidget(){this.ajaxWidget=new i.default({ajaxVarsDefault:{query_vars:{tax_query:[],paged:this.pagination.getPagedCurrent()}},cacheAllow:!0,widget:this}),this.ajaxWidget.on("response/success",this.responseSuccess.bind(this)),this.ajaxWidget.on("response/fail",this.responseFail.bind(this))}setCacheDefault(){this.ajaxWidget.setCache(this.elements.$variable.get(0).outerHTML)}onPagination(){this.ajaxWidget.isRequestFree()&&(this.pagination.isLoadMore()||this.pagination.isInfiniteScroll()?this.ajaxMethod="load-more":this.ajaxMethod="pagination",this.ajaxWidget.request())}onUpdatePage(e){this.ajaxWidget.isRequestFree()&&this.ajaxWidget.setAjaxVars("query_vars.paged",e)}responseSuccess(){this.trigger("ajaxInsertHTML:before"),this.ajaxInsertHTML(),this.trigger("ajaxInsertHTML:after"),this.pagination.onSuccess()}responseFail(){this.pagination.onFail()}ajaxInsertHTML(){const e=this.ajaxWidget.getResponseData(),t=jQuery(e),s=t.find(".elementor-invisible"),{selectors:n}=this.getSettings(),{selectors:i}=this.pagination.getSettings();if(1<=s.length){const e=s.data("settings"),t=e.animation||"none";if("none"!==t){const n=e._animation_delay||e.animation_delay||0;setTimeout((()=>{s.removeClass("elementor-invisible").addClass(`animated ${t}`)}),n)}else s.removeClass("elementor-invisible")}if("load-more"===this.ajaxMethod){this.elements.$events.append(t.find(n.events).contents());const e=t.find(i.root);e.find(i.linkLoadMore).length?this.pagination.elements.$root.replaceWith(e):this.pagination.elements.$root.remove()}else this.elements.$variable.html(t.contents().parent())}onResize(){this.resetLayout(),this.reLayoutDebounce()}resetLayout(){this.borderColumns.clear(),this.removeMasonry()}reLayoutDebounce(){this.reLayout()}unbindEvents(){elementorFrontend.elements.$window.off("resize",this.onResize)}}t.default=EventsGrid}}]);